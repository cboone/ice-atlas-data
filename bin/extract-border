#!/usr/bin/env bash

function main {
  set -e

  local -r start_time="$(date -u '+%Y-%m-%d %H:%M:%S')"
  echo "[extract-border] Started at $start_time"

  for region in "$@"; do
    local source="pbf/sources/$region.osm.pbf"
    local destination="borders/$region"

    echo "[extract-border] Extracting admin level 4 borders from \"$source\" into \"$destination\""
    osm_extract_polygon --geojson --file "$source" --path "$destination" --max 4 --min 4 --overwrite
  done
}

main "$@"
